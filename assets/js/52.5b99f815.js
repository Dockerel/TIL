(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{384:function(t,a,s){"use strict";s.r(a);var _=s(28),v=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_6-응용-서비스와-표현-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-응용-서비스와-표현-영역"}},[t._v("#")]),t._v(" 6. 응용 서비스와 표현 영역")]),t._v(" "),a("h2",{attrs:{id:"_6-1-표현-영역과-응용-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-표현-영역과-응용-영역"}},[t._v("#")]),t._v(" 6.1 표현 영역과 응용 영역")]),t._v(" "),a("ul",[a("li",[t._v("표현 영역 : 사용자의 요청 해석")]),t._v(" "),a("li",[t._v("응용 영역 : 실제 사용자가 원하는 기능 제공")])]),t._v(" "),a("h2",{attrs:{id:"_6-2-응용-서비스의-역할"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-응용-서비스의-역할"}},[t._v("#")]),t._v(" 6.2 응용 서비스의 역할")]),t._v(" "),a("ul",[a("li",[t._v("도메인 영역과 표현 영역 연결")]),t._v(" "),a("li",[t._v("주로 도메인 객체 간의 흐름 제어")]),t._v(" "),a("li",[t._v("보통 단순한 형태를 갖고, 만약 응용 서비스가 복잡하다면 도메인 로직의 일부를 구현하고 있을 가능성이 높음")])]),t._v(" "),a("blockquote",[a("p",[t._v("Q.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomeCreation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateSomeReq")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 이런건 어디에 만들어야?")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SomeAgg")]),t._v(" newAgg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSome")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SomeAgg 도메인 로직")]),t._v("\n   someAggRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newAgg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SomeAgg 응용 계층의 인터페이스에")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSuccessResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newAgg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 애그리거트 응답 생성도 SomeAgg 도메인 로직?")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("도메인에 정의 or 그냥 함수 분리?")])]),t._v(" "),a("blockquote",[a("p",[t._v("Q. 띱 pr 넣은거에서 레디스에 저장되는 유저 정보는 엔티티로 만들지 않았지만 도메인으로 빼서 정리하는게 좋을까")])]),t._v(" "),a("ul",[a("li",[t._v("응용 서비스는 트랜잭션 처리도 담당")])]),t._v(" "),a("h3",{attrs:{id:"_6-2-1-도메인-로직-넣지-않기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-1-도메인-로직-넣지-않기"}},[t._v("#")]),t._v(" 6.2.1 도메인 로직 넣지 않기")]),t._v(" "),a("ul",[a("li",[t._v("도메인의 핵심 로직은 꼭 도메인 내에서 실행하도록")])]),t._v(" "),a("p",[t._v("도메인 로직을 도메인 영역과 응용 서비스에 분산해서 구현하면")]),t._v(" "),a("ol",[a("li",[t._v("코드의 응집성이 떨어짐")]),t._v(" "),a("li",[t._v("여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아짐")])]),t._v(" "),a("p",[t._v("→ 도메인 로직들을 도메인 영역에 잘 모아서 구현하는 것이 중요")]),t._v(" "),a("h2",{attrs:{id:"_6-3-응용-서비스의-구현"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-응용-서비스의-구현"}},[t._v("#")]),t._v(" 6.3 응용 서비스의 구현")]),t._v(" "),a("ul",[a("li",[t._v("응용 서비스는 디자인 패턴에서 파사드와 같은 역할")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-1-응용-서비스의-크기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-응용-서비스의-크기"}},[t._v("#")]),t._v(" 6.3.1 응용 서비스의 크기")]),t._v(" "),a("ol",[a("li",[t._v("한 응용 서비스 클래스에 회원 도메인의 모든 기능 구현")])]),t._v(" "),a("ul",[a("li",[t._v("각 기능에서 동일 로직에 대한 코드 중복 제거 가능")]),t._v(" "),a("li",[t._v("서비스 클래스의 크기가 커지고, 연관성이 적은 코드가 함께 위치하게 됨")]),t._v(" "),a("li",[t._v("결과적으로 코드 품질 ↓")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("구분되는 기능별로 응용 서비스 클래스를 따로 구현하기")])]),t._v(" "),a("ul",[a("li",[t._v("클래스 개수는 많아지지만 코드 품질을 일정 수준으로 유지하는데 도움이 됨")]),t._v(" "),a("li",[t._v("코드 중복이 발생할 수 있음 → 별도 클래스에 로직 구현 (e.g., MemberServiceHelper)")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-2-응용-서비스의-인터페이스와-클래스"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-응용-서비스의-인터페이스와-클래스"}},[t._v("#")]),t._v(" 6.3.2 응용 서비스의 인터페이스와 클래스")]),t._v(" "),a("p",[t._v("응용 서비스의 인터페이스가 필요한 상황 → 구현 클래스가 여러 개인 경우")]),t._v(" "),a("ul",[a("li",[t._v("근데 응용 서비스는 런타임에 교체하는 경우가 거의 없음 + 여러 구현 클래스를 가지는 경우도 드뭄")]),t._v(" "),a("li",[t._v("결국 소스 파일만 많아지고 구현 클래스에 대한 간접 참조가 증가해서 전체 구조만 복잡해짐")]),t._v(" "),a("li",[t._v("정말 필요한 상황 아니면 쓰지말길")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-3-메서드-파라미터와-값-리턴"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-3-메서드-파라미터와-값-리턴"}},[t._v("#")]),t._v(" 6.3.3 메서드 파라미터와 값 리턴")]),t._v(" "),a("ul",[a("li",[t._v("생략")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-4-표현-영역에-의존하지-않기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-4-표현-영역에-의존하지-않기"}},[t._v("#")]),t._v(" 6.3.4 표현 영역에 의존하지 않기")]),t._v(" "),a("ul",[a("li",[t._v("표현 영역과 관련된 타입 사용하지 않기 → 응용 서비스만 단독으로 테스트하기 어려워짐 + 표현 영역의 역할을 침범해버릴 수 있음")])]),t._v(" "),a("h3",{attrs:{id:"_6-3-5-트랜잭션-처리"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-5-트랜잭션-처리"}},[t._v("#")]),t._v(" 6.3.5 트랜잭션 처리")]),t._v(" "),a("ul",[a("li",[t._v("생략")])]),t._v(" "),a("h2",{attrs:{id:"_6-4-표현-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-표현-영역"}},[t._v("#")]),t._v(" 6.4 표현 영역")]),t._v(" "),a("h3",{attrs:{id:"표현-영역의-역할"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#표현-영역의-역할"}},[t._v("#")]),t._v(" 표현 영역의 역할")]),t._v(" "),a("ol",[a("li",[t._v("사용자가 시스템을 사용할 수 있도록 알맞은 흐름 제공\n"),a("ul",[a("li",[t._v("요청을 응답으로 제공")])])]),t._v(" "),a("li",[t._v("사용자의 요청에 맞게 응용 서비스에 기능 실행 요청\n"),a("ul",[a("li",[t._v("사용자의 요청을 응용 서비스가 요구하는 형식으로 변환하고 그 결과를 응답 형식으로 변환")])])]),t._v(" "),a("li",[t._v("세션 관리")])]),t._v(" "),a("h2",{attrs:{id:"_6-5-값-검증"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-값-검증"}},[t._v("#")]),t._v(" 6.5 값 검증")]),t._v(" "),a("ul",[a("li",[t._v("값 검증은 "),a("code",[t._v("표현")]),t._v(" / "),a("code",[t._v("응용")]),t._v(" 서비스 두 곳에서 모두 수행 가능")]),t._v(" "),a("li",[t._v("원칙적으로 모든 값에 대한 검증은 응용 서비스에서")]),t._v(" "),a("li",[t._v("응용에서 에러 코드 모아서 표현에서 하나의 예외로 발생시키기")])]),t._v(" "),a("p",[t._v("보통은")]),t._v(" "),a("ul",[a("li",[t._v("표현 영역 : 필수 값, 값의 형식, 범위 등을 검증")]),t._v(" "),a("li",[t._v("응용 서비스 : 데이터의 존재 유무와 같은 논리적 오류 검증")])]),t._v(" "),a("p",[t._v("여기 저자 분은 응용에서 싹다 하신다고 함 → 응용 계층의 완성도 ↑")]),t._v(" "),a("h2",{attrs:{id:"_6-6-권한-검사"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-권한-검사"}},[t._v("#")]),t._v(" 6.6 권한 검사")]),t._v(" "),a("h3",{attrs:{id:"표현-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#표현-영역"}},[t._v("#")]),t._v(" 표현 영역")]),t._v(" "),a("ul",[a("li",[t._v("인증된 사용자인지 아닌지 검사")]),t._v(" "),a("li",[t._v("필터를 사용해서 URL별 권한 검사도 가능")])]),t._v(" "),a("h3",{attrs:{id:"응용-영역"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#응용-영역"}},[t._v("#")]),t._v(" 응용 영역")]),t._v(" "),a("ul",[a("li",[t._v("URL 만으로 접근 제어가 불가능한 경우 응용 영역에서 메서드 단위로 권한 검사를 해야 함")]),t._v(" "),a("li",[t._v("e.g., AOP를 활용해서 애너테이션으로 권한 검사")]),t._v(" "),a("li",[t._v("정리하자면 보안 프레임워크에 대한 높은 이해가 있으면 도입 OK, 아니면 직접 권한 검사 기능 구현도 OK")])]),t._v(" "),a("h2",{attrs:{id:"_6-7-조회-전용-기능과-응용-서비스"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-조회-전용-기능과-응용-서비스"}},[t._v("#")]),t._v(" 6.7 조회 전용 기능과 응용 서비스")]),t._v(" "),a("ul",[a("li",[t._v("서비스에서 추가적인 로직을 필요로 하지 않고 단일 쿼리만 실행하는 조회 전용 기능이어서 트랜잭션도 필요 없으면 그냥 표현 영역에서 바로 조회 전용 기능 사용해도 문제 x")]),t._v(" "),a("li",[t._v("굳이 다른 영역을 다 사용할 필요 없다는 뜻 같음")]),t._v(" "),a("li",[t._v("e.g. controller - facade - service에서 굳이 facade를 통할 필요 없음")])]),t._v(" "),a("blockquote",[a("p",[t._v("Q. 근데 Repository 인터페이스가 그럼 Dao로 쓰이는건가")])])])}),[],!1,null,null,null);a.default=v.exports}}]);