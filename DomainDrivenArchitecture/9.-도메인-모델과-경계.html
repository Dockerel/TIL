<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>9. 도메인 모델과 경계 | Today Dockerel Learned</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="Dockerel&#39;s Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.40dd5a95.css" as="style"><link rel="preload" href="/TIL/assets/js/app.2cf51ff6.js" as="script"><link rel="preload" href="/TIL/assets/js/2.188c950f.js" as="script"><link rel="preload" href="/TIL/assets/js/1.a1e51968.js" as="script"><link rel="preload" href="/TIL/assets/js/56.94e53024.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.e6f03b60.js"><link rel="prefetch" href="/TIL/assets/js/11.0fba4bf3.js"><link rel="prefetch" href="/TIL/assets/js/12.181bd7bc.js"><link rel="prefetch" href="/TIL/assets/js/13.c5707e1c.js"><link rel="prefetch" href="/TIL/assets/js/14.b086a433.js"><link rel="prefetch" href="/TIL/assets/js/15.3e75d743.js"><link rel="prefetch" href="/TIL/assets/js/16.a2bc07a8.js"><link rel="prefetch" href="/TIL/assets/js/17.efd50cd8.js"><link rel="prefetch" href="/TIL/assets/js/18.c240daa0.js"><link rel="prefetch" href="/TIL/assets/js/19.60958448.js"><link rel="prefetch" href="/TIL/assets/js/20.4352d5d9.js"><link rel="prefetch" href="/TIL/assets/js/21.95bf5e05.js"><link rel="prefetch" href="/TIL/assets/js/22.664a6cc8.js"><link rel="prefetch" href="/TIL/assets/js/23.5ae71a00.js"><link rel="prefetch" href="/TIL/assets/js/24.1a2d4008.js"><link rel="prefetch" href="/TIL/assets/js/25.1aeaac43.js"><link rel="prefetch" href="/TIL/assets/js/26.023e1766.js"><link rel="prefetch" href="/TIL/assets/js/27.2fbb35e2.js"><link rel="prefetch" href="/TIL/assets/js/28.dc0a1c24.js"><link rel="prefetch" href="/TIL/assets/js/29.8c5d0287.js"><link rel="prefetch" href="/TIL/assets/js/3.e9de9cb1.js"><link rel="prefetch" href="/TIL/assets/js/30.4313966a.js"><link rel="prefetch" href="/TIL/assets/js/31.497b398a.js"><link rel="prefetch" href="/TIL/assets/js/32.331b8980.js"><link rel="prefetch" href="/TIL/assets/js/33.5e54d659.js"><link rel="prefetch" href="/TIL/assets/js/34.0b74f4da.js"><link rel="prefetch" href="/TIL/assets/js/35.0a8a108d.js"><link rel="prefetch" href="/TIL/assets/js/36.cbf3b123.js"><link rel="prefetch" href="/TIL/assets/js/37.12a309ce.js"><link rel="prefetch" href="/TIL/assets/js/38.2ab55a68.js"><link rel="prefetch" href="/TIL/assets/js/39.e04eb50a.js"><link rel="prefetch" href="/TIL/assets/js/4.c5b6f970.js"><link rel="prefetch" href="/TIL/assets/js/40.228179de.js"><link rel="prefetch" href="/TIL/assets/js/41.d95ab8ba.js"><link rel="prefetch" href="/TIL/assets/js/42.802483c4.js"><link rel="prefetch" href="/TIL/assets/js/43.060244fe.js"><link rel="prefetch" href="/TIL/assets/js/44.005fdc00.js"><link rel="prefetch" href="/TIL/assets/js/45.afdd6d68.js"><link rel="prefetch" href="/TIL/assets/js/46.a080b8a1.js"><link rel="prefetch" href="/TIL/assets/js/47.1cb7ba4f.js"><link rel="prefetch" href="/TIL/assets/js/48.b41dd56a.js"><link rel="prefetch" href="/TIL/assets/js/49.dd63815a.js"><link rel="prefetch" href="/TIL/assets/js/5.5e20f558.js"><link rel="prefetch" href="/TIL/assets/js/50.6a418ca8.js"><link rel="prefetch" href="/TIL/assets/js/51.9e632b6e.js"><link rel="prefetch" href="/TIL/assets/js/52.7b9dcd84.js"><link rel="prefetch" href="/TIL/assets/js/53.3633a7a3.js"><link rel="prefetch" href="/TIL/assets/js/54.45b7e7b6.js"><link rel="prefetch" href="/TIL/assets/js/55.a7f62508.js"><link rel="prefetch" href="/TIL/assets/js/57.ec175d32.js"><link rel="prefetch" href="/TIL/assets/js/58.fda9bada.js"><link rel="prefetch" href="/TIL/assets/js/59.7cedb0a5.js"><link rel="prefetch" href="/TIL/assets/js/6.e8a6e3a8.js"><link rel="prefetch" href="/TIL/assets/js/60.d1190b79.js"><link rel="prefetch" href="/TIL/assets/js/61.8384a939.js"><link rel="prefetch" href="/TIL/assets/js/62.9e37c56e.js"><link rel="prefetch" href="/TIL/assets/js/63.293b91ea.js"><link rel="prefetch" href="/TIL/assets/js/64.2a04168f.js"><link rel="prefetch" href="/TIL/assets/js/65.a7d1a07c.js"><link rel="prefetch" href="/TIL/assets/js/66.7b3aa0ab.js"><link rel="prefetch" href="/TIL/assets/js/67.b4e7ab5a.js"><link rel="prefetch" href="/TIL/assets/js/68.616a4cf6.js"><link rel="prefetch" href="/TIL/assets/js/69.ce184f66.js"><link rel="prefetch" href="/TIL/assets/js/7.7fea5211.js"><link rel="prefetch" href="/TIL/assets/js/70.1bf2dfec.js"><link rel="prefetch" href="/TIL/assets/js/71.41653f4a.js"><link rel="prefetch" href="/TIL/assets/js/72.2c560537.js"><link rel="prefetch" href="/TIL/assets/js/73.a21bf0b2.js"><link rel="prefetch" href="/TIL/assets/js/74.64be365b.js"><link rel="prefetch" href="/TIL/assets/js/75.ee0f5c2f.js"><link rel="prefetch" href="/TIL/assets/js/vendors~docsearch.68e379d9.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.40dd5a95.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today Dockerel Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/Dockerel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dockerel.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/Dockerel/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dockerel.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>DomainDrivenArchitecture</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/DomainDrivenArchitecture/1.-도메인-모델-시작하기.html" class="sidebar-link">1. 도메인 모델 시작하기</a></li><li><a href="/TIL/DomainDrivenArchitecture/2.-아키텍처-개요.html" class="sidebar-link">2. 아키텍처 개요</a></li><li><a href="/TIL/DomainDrivenArchitecture/3.-애그리거트.html" class="sidebar-link">3. 애그리거트</a></li><li><a href="/TIL/DomainDrivenArchitecture/4.-리포지터리와-모델-구현.html" class="sidebar-link">4. 리포지터리와 모델 구현</a></li><li><a href="/TIL/DomainDrivenArchitecture/5.-스프링-데이터-JPA를-이용한-조회-기능.html" class="sidebar-link">5. 스프링 데이터 JPA를 이용한 조회 기능</a></li><li><a href="/TIL/DomainDrivenArchitecture/6.-응용-서비스와-표현-영역.html" class="sidebar-link">6. 응용 서비스와 표현 영역</a></li><li><a href="/TIL/DomainDrivenArchitecture/7.-도메인-서비스.html" class="sidebar-link">7. 도메인 서비스</a></li><li><a href="/TIL/DomainDrivenArchitecture/8.-애그리거트-트랜잭션-관리.html" class="sidebar-link">8. 애그리거트 트랜잭션 관리</a></li><li><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html" class="active sidebar-link">9. 도메인 모델과 경계</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#바운디드-컨텍스트" class="sidebar-link">바운디드 컨텍스트</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#바운디드-컨텍스트-구현" class="sidebar-link">바운디드 컨텍스트 구현</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#바운디드-컨텍스트-간-통합" class="sidebar-link">바운디드 컨텍스트 간 통합</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#msa와-바운디드-컨텍스트" class="sidebar-link">MSA와 바운디드 컨텍스트</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#바운디드-컨텍스트-간-관계" class="sidebar-link">바운디드 컨텍스트 간 관계</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#독립-방식" class="sidebar-link">독립 방식</a></li><li class="sidebar-sub-header"><a href="/TIL/DomainDrivenArchitecture/9.-도메인-모델과-경계.html#컨텍스트-맵" class="sidebar-link">컨텍스트 맵</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OperatingSystem</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_9-도메인-모델과-경계"><a href="#_9-도메인-모델과-경계" class="header-anchor">#</a> 9. 도메인 모델과 경계</h1> <ul><li>한 개의 모델로 여러 하위 도메인을 모두 표현하려고 시도하면 안됨
<ul><li>ex1) 재고 관리, 주문, 배송에서 의미하는 상품 도메인의 의미가 모두 다름</li> <li>ex2) 시스템을 사용하는 도메인에서는 회원, 주문에서는 주문자, 배송에서는 보내는 사람</li></ul></li> <li>특정한 문맥 하에서 서로 다른 의미를 가질 수 있으므로 하위 도메인마다 모델을 만들어야 하며 이러한 경계를 <strong>바운디드 컨텍스트</strong>(<strong>Bounded Context</strong>)라 부름</li></ul> <h2 id="바운디드-컨텍스트"><a href="#바운디드-컨텍스트" class="header-anchor">#</a> 바운디드 컨텍스트</h2> <ul><li>바운디드 컨텍스트는 모델의 경계를 결정
<img src="https://velog.velcdn.com/images/andy230/post/effa5611-d706-4a04-b8e7-3c18aa133025/image.png" alt=""></li> <li>한 개의 바운디드 컨텍스트는 논리적으로 한 개의 모델을 가짐</li> <li>한 바운디드 컨텍스트는 실제로 사용자에게 기능을 제공하는 물리적 시스템
<img src="https://velog.velcdn.com/images/andy230/post/94382466-803c-43fd-8d8a-495390612548/image.png" alt=""></li> <li>규모가 작은 기업은 전체 시스템을 하나의 팀에서 구현할 때도 있음</li> <li>이럴 때 여러 하위 도메인을 하나의 바운디드 컨텍스트 안에서 구현해야 하는데 이떄 하위 도메인이 섞이지 않도록 해야함</li> <li>하위 도메인마다 구분되는 패키지를 갖도록 하여 바운디드 컨텍스트를 만들어야 함
<img src="https://velog.velcdn.com/images/andy230/post/f18fbce4-1c8d-4de3-933e-defd870cf174/image.png" alt=""></li> <li>회원의 Member와 주문의 Orderer (애그리거트 루트, 밸류)
<ul><li>각각 다른 엔티티는 아니고 주문 바운디드 컨텍스트에서 값만 VO(Value Object)로 사용</li></ul></li> <li>카탈로그와 재고 바운디드 컨텍스트 (둘다 애그리거트)</li> <li>카탈로그와 재고 바운디드 컨텍스트 각각에서 엔티티를 정의</li></ul> <h2 id="바운디드-컨텍스트-구현"><a href="#바운디드-컨텍스트-구현" class="header-anchor">#</a> 바운디드 컨텍스트 구현</h2> <p><img src="https://velog.velcdn.com/images/andy230/post/290d42d2-fa5e-4eb9-81b9-585d3e9c1f8b/image.png" alt=""></p> <ul><li>바운디드 컨텍스트에서는 표현, 응용, 인프라 및 테이블 스키마까지 포함됨</li> <li>바운디드 컨텍스트마다 정해진 구현 방법은 없고 서로 다른 아키텍처, 구현 기술를 사용할 수 있음</li></ul> <h2 id="바운디드-컨텍스트-간-통합"><a href="#바운디드-컨텍스트-간-통합" class="header-anchor">#</a> 바운디드 컨텍스트 간 통합</h2> <h3 id="직접적인-바운디드-컨텍스트-통합"><a href="#직접적인-바운디드-컨텍스트-통합" class="header-anchor">#</a> 직접적인 바운디드 컨텍스트 통합</h3> <ul><li>상품 추천 기능이 추가 된다 하면 추천 바운디드 컨텍스트가 새로 생김
<ul><li>상품 추천 기능 도메인 서비스는 인프라 영역에 위치</li></ul></li> <li>받아온 데이터를 현재 도메인의 Product 모델로 변환하는 작업 등도 수행</li></ul> <h3 id="간접적인-바운디드-컨텍스트-통합"><a href="#간접적인-바운디드-컨텍스트-통합" class="header-anchor">#</a> 간접적인 바운디드 컨텍스트 통합</h3> <ul><li>메시지 큐 사용
<ul><li>사용자가 조회한 상품 이력 등을 메시지 큐로 전달</li></ul></li></ul> <h2 id="msa와-바운디드-컨텍스트"><a href="#msa와-바운디드-컨텍스트" class="header-anchor">#</a> MSA와 바운디드 컨텍스트</h2> <ul><li>MSA는 개별 서비스를 독립된 프로세스로 실행하고 각 서비스가 REST API나 메시징을 통해 통신하는 구조</li> <li>바운디드 컨텍스트와 잘 어울림 - 바운디드 컨텍스트를 MSA로 구현하면 자연스럽게 컨텍스트 별로 모델이 분리됨</li></ul> <h2 id="바운디드-컨텍스트-간-관계"><a href="#바운디드-컨텍스트-간-관계" class="header-anchor">#</a> 바운디드 컨텍스트 간 관계</h2> <ul><li>가장 흔한 바운디드 컨텍스트 연결 방식은 API 제공 및 호출</li> <li>API 제공 측에 의존하게 됨</li> <li>그래서 두 팀이 서로 개발 계획을 공유하고 일정을 협의해야 함
<img src="https://leejaedoo.github.io/assets/img/bounded_context2.jpg" alt=""></li> <li>여기서 RecSystemClient는 외부 시스템의 도메인이 침범하지 않도록 막아주는 역할</li> <li>해당 부분이 모델 변환을 처리해주기 때문에 다른 바운디드 컨텍스트의 모델에 영향을 받지 않고 내 도메인 모델을 유지할 수 있음</li></ul> <h3 id="공유-커널"><a href="#공유-커널" class="header-anchor">#</a> 공유 커널</h3> <ul><li>두 바운디드 컨텍스트가 같은 공유하는 모델을 가질 때 이를 공유 커널이라 함</li> <li>중복을 줄일 수 있지만, 한 팀에서 임의로 모델을 변경해서는 안되며, 두 팀이 밀접한 관계를 유지해야 함</li></ul> <h2 id="독립-방식"><a href="#독립-방식" class="header-anchor">#</a> 독립 방식</h2> <ul><li>서로 통합하지 않음. 독립적으로 모델 발전</li> <li>한 시스템이 변경되면 수동으로 바운디드 컨텍스트 수정 및 통합</li> <li>이는 한계가 있으므로 규모가 커지기 시작하면 두 바운디드 컨텍스트를 통합해야 함</li> <li>그럴 수 없다면 두 바운디드 컨텍스트를 통합해주는 별도 시스템을 만들어야 함</li></ul> <h2 id="컨텍스트-맵"><a href="#컨텍스트-맵" class="header-anchor">#</a> 컨텍스트 맵</h2> <p><img src="https://leejaedoo.github.io/assets/img/bounded_context6.jpg" alt=""></p> <ul><li>전체 비즈니스를 조망하기 위한 지도</li> <li>각 바운디드 컨텍스트의 경계 및 어떤 관계를 맺고 있는지</li> <li>OHS(Open Host Service), ACL(Anti Corruption Layer) 표시</li> <li>하위 도메인이나 조직 구조, 주요 애그리거트를 함께 표시하면 전체 관계 및 모델에 대한 이해에 도움이 됨</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/DomainDrivenArchitecture/8.-애그리거트-트랜잭션-관리.html" class="prev">
        8. 애그리거트 트랜잭션 관리
      </a></span> <span class="next"><a href="/TIL/Java/직렬화와-역직렬화.html">
        직렬화와 역직렬화
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.2cf51ff6.js" defer></script><script src="/TIL/assets/js/2.188c950f.js" defer></script><script src="/TIL/assets/js/1.a1e51968.js" defer></script><script src="/TIL/assets/js/56.94e53024.js" defer></script>
  </body>
</html>
